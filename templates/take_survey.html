{% extends "base.html" %}
{% block title %}Anketi Doldur{% endblock %}

{% block content %}
<div class="main-card">
    <h2 class="page-title mb-1">"{{ survey.title }}" Anketi</h2>
    {% if survey.description %}
        <p class="page-subtitle mb-4">{{ survey.description }}</p>
    {% endif %}

<form method="post">
    {% if questions %}
        {% for q in questions %}
        <div class="card card-take mb-4">
            <div class="question-header d-flex align-items-center mb-2">
                <span class="question-number">{{ loop.index }}</span>
                <strong class="ml-2">{{ q.question_text }}</strong>
            </div>

            {% for o in q.options %}
            <label class="option-box mb-2">
                <input type="radio"
                    name="question_{{ q.id }}"
                    value="{{ o.id }}"
                    required>
                <span>{{ o.option_text }}</span>
            </label>
            {% endfor %}

        </div>
        {% endfor %}

        <button type="submit" class="btn btn-primary submit-btn rounded-pill mt-3">
            Gönder
        </button>
        <a href="{{ url_for('list_surveys') }}"
           class="btn btn-light submit-btn rounded-pill mt-3 ml-2">
            İptal
        </a>
    {% else %}
        <div class="empty-state">
            <div class="empty-state-title">Bu ankete henüz soru eklenmemiş.</div>
            <p class="mb-3">Anketi doldurmak için önce “Soruları Yönet” ekranından en az bir soru eklenmeli.</p>
            <a href="{{ url_for('manage_questions', survey_id=survey.id) }}"
               class="btn btn-primary rounded-pill">
                Soruları Yönet
            </a>
        </div>
    {% endif %}
</form>

</div>
{% endblock %}
